"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[145],{1145:function(s,e,t){t.r(e),t.d(e,{default:function(){return J}});var i=t(1413),r=t(5671),n=t(3144),o=t(136),a=t(5716),u=t(2791),l=t(885),c="ProfileInfo_descriptionBlock__XBXuJ",d="ProfileInfo_mainPhoto__QU8TO",h=t(7508),p=t(184),f=function(s){var e=(0,u.useState)(!1),t=(0,l.Z)(e,2),i=t[0],r=t[1],n=(0,u.useState)(s.status),o=(0,l.Z)(n,2),a=o[0],c=o[1];(0,u.useEffect)((function(){c(s.status)}),[s.status]);return(0,p.jsxs)("div",{children:[!i&&(0,p.jsx)("div",{children:(0,p.jsx)("span",{onDoubleClick:function(){r(!0)},children:s.status})}),i&&(0,p.jsx)("div",{children:(0,p.jsx)("input",{onChange:function(s){c(s.currentTarget.value)},autoFocus:!0,onBlur:function(){r(!1),s.updateStatus(a)},value:a})})]})},x=t(1633),j=t(1117),v=t(704),m=t(2813),b=(0,v.Z)({form:"edit-profile"})((function(s){var e=s.profile,t=s.handleSubmit,i=s.error;return(0,p.jsxs)("form",{onSubmit:t,children:[(0,p.jsx)("div",{children:(0,p.jsx)("button",{children:"Save"})}),i&&(0,p.jsx)("div",{className:m.Z.formSummaryError,children:i}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Full Name"}),": ",(0,j.Gr)("Full name","fullName",[],j.II)]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Looking for a job"}),": ",(0,j.Gr)("","lookingForAJob",[],j.II,{type:"checkbox"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"My professional skills"}),":"," ",(0,j.Gr)("My professional skills","lookingForAJobDescription",[],j.gx)]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"About me"}),": ",(0,j.Gr)("About me","aboutMe",[],j.gx)]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Contacts"}),":",e.contacts&&Object.entries(null===e||void 0===e?void 0:e.contacts).map((function(s){var e=(0,l.Z)(s,1)[0];return(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:e}),": ",(0,j.Gr)(e,"contacts."+e,[],j.II)]},e)}))]})]})})),g=function(s){var e=s.profile,t=s.isOwner,i=s.goToEditMode;return(0,p.jsxs)("div",{children:[t&&(0,p.jsx)("div",{children:(0,p.jsx)("button",{onClick:i,children:"edit"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Full Name"}),": ",e.fullName]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Looking for a job"}),": ",e.lookingForAJob?"Yes":"No"]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"My professional skills"}),": ",e.lookingForAJobDescription]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"About me"}),": ",e.aboutMe]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Contacts"}),":",e.contacts&&Object.entries(null===e||void 0===e?void 0:e.contacts).map((function(s){var e=(0,l.Z)(s,2),t=e[0],i=e[1];return(0,p.jsx)(P,{contactTitle:t,contactValue:i},t)}))]})]})},P=function(s){var e=s.contactTitle,t=s.contactValue;return(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:e}),": ",t]})},k=function(s){var e=s.profile,t=s.status,i=s.updateStatus,r=s.isOwner,n=s.savePhoto,o=s.saveProfile,a=(0,u.useState)(1),j=(0,l.Z)(a,2),v=j[0],m=j[1],P=(0,u.useState)(!1),k=(0,l.Z)(P,2),S=k[0],y=k[1],Z=(0,u.useRef)(null);if(!e)return(0,p.jsx)(h.Z,{});return(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:c,children:[(0,p.jsx)("img",{src:e.photos?e.photos.large:x,alt:"",className:d}),r&&(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{type:"file",onChange:function(s){s.target.files.length&&m(s.target.files[0])},ref:Z}),(0,p.jsx)("button",{disabled:1===v,onClick:function(){n(v).finally((function(){Z.current&&(Z.current.value="",Z.current.type="text",Z.current.type="file")}))},children:"Submit"})]}),S?(0,p.jsx)(b,{initialValues:e,profile:e,onSubmit:function(s){o(s).then((function(){return y(!1)}))}}):(0,p.jsx)(g,{goToEditMode:function(){return y(!0)},profile:e,isOwner:r}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Status"}),": ",(0,p.jsx)(f,{status:t,updateStatus:i})]})]})})},S=t(5344),y="MyPosts_postsBlock__lB-pf",Z="MyPosts_posts__GSiZ2",N="MyPost_item__xSWqM",_=function(s){return(0,p.jsxs)("div",{className:N,children:[(0,p.jsx)("img",{src:"https://pyxis.nymag.com/v1/imgs/51b/28a/622789406b8850203e2637d657d5a0e0c3-avatar-rerelease.rsquare.w700.jpg",alt:"Avatar"}),s.message,(0,p.jsx)("div",{children:(0,p.jsxs)("span",{children:["likes: ",s.countLikes]})})]})},I=t(2381),w=t(6139),A=t(3079),M=(0,A.D)(10);var C=(0,v.Z)({form:"ProfileAddNewPostForm"})((function(s){return(0,p.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,p.jsx)("div",{children:(0,p.jsx)(w.Z,{name:"NewPostText",component:j.gx,validate:[A.l,M],placeholder:"your post message"})}),(0,p.jsx)("div",{children:(0,p.jsx)("button",{children:"Add post"})})]})})),F=function(s){console.log("Return YO");return(0,p.jsxs)("div",{className:y,children:[(0,p.jsx)("h3",{children:"My posts"}),(0,p.jsx)(C,{onSubmit:function(e,t){s.addPost(e.NewPostText),t((0,I.mc)("ProfileAddNewPostForm"))}}),(0,p.jsx)("div",{className:Z,children:s.posts.map((function(s,e){return(0,p.jsx)(_,{message:s.message,countLikes:s.countLikes},e)}))})]})},O=t(364),T=(0,O.$j)((function(s){return{posts:s.profilePage.myPostData}}),(function(s){return{addPost:function(e){s((0,S.Wl)(e))}}}))(F),U=function(s){return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(k,{isOwner:s.isOwner,profile:s.profile,status:s.status,updateStatus:s.updateStatus,savePhoto:s.savePhoto,saveProfile:s.saveProfile}),(0,p.jsx)(T,{})]})},D=t(9271),G=t(7781),B=t(2932),E=function(s){(0,o.Z)(t,s);var e=(0,a.Z)(t);function t(){return(0,r.Z)(this,t),e.apply(this,arguments)}return(0,n.Z)(t,[{key:"refreshProfile",value:function(){var s=this.props.match.params.userId;!s&&this.props.authorisedUserId&&(s=this.props.authorisedUserId.toString()),s||this.props.history.push("/login"),this.props.getUserProfile(s),this.props.getStatus(s)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s,e,t){this.props.match.params.userId!=s.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,p.jsx)(U,(0,i.Z)((0,i.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto}))}}]),t}(u.Component),J=(0,G.qC)((0,O.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authorisedUserId:s.auth.id,isAuth:s.auth.isAuth}}),{getUserProfile:S.et,getStatus:S.lR,updateStatus:S.Nf,savePhoto:S.jx,saveProfile:S.Ii}),D.EN,B.e)(E)},1633:function(s,e,t){s.exports=t.p+"static/media/mainUser.6442a55c753b53c2b5ba.png"}}]);
//# sourceMappingURL=145.ed4dd32b.chunk.js.map